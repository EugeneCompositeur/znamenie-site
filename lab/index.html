<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Храм Знамения Пресвятой Богородицы в Париже</title>
  <meta name="description" content="Официальный сайт Храма Знамения Пресвятой Богородицы в Париже. Православное расписание богослужений, адрес, контакты." />
  <meta name="keywords" content="храм, православие, Париж, Богородица, Église Orthodoxe, Notre-Dame du Signe, Paris, богослужение, расписание, православный приход, церковь" />
  <link rel="icon" href="assets/icon.gif" type="image/gif" />
  <link href="https://fonts.googleapis.com/css2?family=Forum&family=Open+Sans&family=Roboto+Mono&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bogoroditsa-blue: #1939A5;
      --bogoroditsa-blue-dark: #15297c;
      --schedule-spoiler-bg: #f7f7f7;
    }
    body {
      margin: 0;
      padding: 0;
      background: #ede6d9;
      font-family: 'Open Sans', sans-serif;
      color: #2f2f2f;
      text-align: center;
    }
    .overlay {
      padding: 2em;
      max-width: 960px;
      margin: auto;
      margin-top: 5vh;
      position: relative;
    }
    .lang-switch {
      position: absolute;
      top: 1em;
      right: 1em;
      font-size: 0.9em;
      display: flex;
      gap: 0.8em;
      z-index: 100;
    }
    .lang-switch span {
      cursor: pointer;
      color: #666;
      font-weight: 600;
      transition: color 0.3s;
      letter-spacing: 0.1em;
      padding: 0.1em 0.2em;
    }
    .lang-switch span.active {
      color: var(--bogoroditsa-blue);
      font-weight: 700;
    }
    .lang-switch span:hover {
      color: var(--bogoroditsa-blue-dark);
    }
    header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 2em;
    }
    .logo-block {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      width: 100%;
      align-items: center;
    }
    .logo-text {
      display: flex;
      flex-direction: column;
      justify-content: center;
      font-family: 'Forum', serif;
      font-size: 2.5em;
      flex: 1;
      color: var(--bogoroditsa-blue);
      letter-spacing: 0.02em;
      font-weight: 700;
      text-shadow: 0 2px 12px #dedbff38;
    }
    .logo-text.left {
      text-align: right;
    }
    .logo-text.right {
      text-align: left;
    }
    .logo-block img {
      height: 140px;
      margin: 0 1em;
      filter: drop-shadow(0 4px 20px #1939a51a);
    }
    .subheading {
      font-size: 1em;
      margin-top: 1em;
      font-family: 'Forum', serif;
      color: #636363;
      letter-spacing: 0.01em;
    }
    .notice {
      font-family: 'Roboto Mono', monospace;
      font-size: 2.3em;
      margin: 2em 0 1.5em 0;
      font-weight: 900;
      letter-spacing: 0.02em;
      color: #3d3d3d;
    }
    .schedule {
      text-align: left;
      background: #fff;
      padding: 1.5em;
      border-radius: 5px;
      font-size: 1em;
      position: relative;
      margin: 0 auto 3em auto;
      max-width: 600px;
      box-shadow: 0 2px 32px #1939a51a;
    }
    .schedule::before {
      content: "";
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      bottom: 10px;
      border: 3px double #a2906f;
      pointer-events: none;
      border-radius: 5px;
      box-sizing: border-box;
    }
    .schedule-label,
    .schedule-month {
      font-size: 1.45em;
      font-family: 'Forum', serif;
      font-weight: bold;
      text-align: center;
      margin-top: 1.1em;
      margin-bottom: 0.5em;
      color: var(--bogoroditsa-blue);
      letter-spacing: 0.05em;
    }
    .schedule ul {
      margin-top: 0;
      margin-bottom: 0;
      padding-left: 1.7em;
      padding-bottom: 1em;
      list-style: disc;
    }
    .schedule ul li {
      text-indent: 0.7em;
      margin-bottom: 0.35em;
      transition: color 0.5s, opacity 0.5s;
    }
    .schedule ul li.past {
      color: #b2b2b2 !important;
      opacity: 0.8;
    }
    .schedule-spoiler {
      background: var(--schedule-spoiler-bg);
      border-radius: 5px;
      padding: 0.6em 1em;
      margin-top: 0.7em;
      text-align: center;
      cursor: pointer;
      color: var(--bogoroditsa-blue);
      font-family: 'Open Sans', sans-serif;
      font-size: 1em;
      font-weight: 700;
      letter-spacing: 0.03em;
      transition: background 0.3s;
      user-select: none;
      border: none;
    }
    .schedule-spoiler:hover {
      background: #e5eafc;
    }
    .blocks-row {
      display: flex;
      flex-wrap: wrap;
      gap: 2em;
      justify-content: center;
      margin-bottom: 3em;
    }
    .card-block {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 4px 28px #1939a51a;
      width: 250px;
      cursor: pointer;
      transition: transform 0.25s, box-shadow 0.3s;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .card-block:hover {
      transform: scale(1.03);
      box-shadow: 0 12px 48px #1939a53a;
    }
    .card-block img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-top-left-radius: 14px;
      border-top-right-radius: 14px;
    }
    .card-title {
      font-family: 'Forum', serif;
      font-size: 1.2em;
      color: var(--bogoroditsa-blue);
      margin: 1em 0 0.7em 0;
      font-weight: 700;
      letter-spacing: 0.02em;
    }
    .card-desc {
      font-size: 1em;
      color: #474747;
      margin-bottom: 1em;
      padding: 0 1em;
    }
    .footer {
      margin-top: 2em;
      font-size: 0.98em;
      color: #555;
    }
    /* Modal Fullscreen */
    .modal-full {
      display: none;
      position: fixed;
      z-index: 2000;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(25, 57, 165, 0.08);
      backdrop-filter: blur(2.5px);
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s;
    }
    .modal-full.open {
      display: flex;
    }
    .modal-content {
      background: #fff;
      border-radius: 18px;
      max-width: 95vw;
      max-height: 92vh;
      overflow-y: auto;
      box-shadow: 0 8px 80px #1939a533;
      padding: 2.7em 2.2em 2.2em 2.2em;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5em;
      min-width: 300px;
      animation: popup 0.28s;
    }
    .modal-content img {
      width: 330px;
      max-width: 90vw;
      border-radius: 14px;
      object-fit: cover;
      margin-bottom: 1.1em;
      box-shadow: 0 2px 24px #1939a515;
    }
    .modal-title {
      font-family: 'Forum', serif;
      color: var(--bogoroditsa-blue);
      font-size: 2em;
      font-weight: 700;
      margin-bottom: 0.3em;
      text-align: center;
    }
    .modal-close {
      position: absolute;
      top: 1.3em;
      right: 1.5em;
      font-size: 2.3em;
      color: #bbb;
      background: none;
      border: none;
      cursor: pointer;
      transition: color 0.2s;
      z-index: 100;
    }
    .modal-close:hover {
      color: var(--bogoroditsa-blue);
    }
    @media (max-width: 900px) {
      .blocks-row { flex-direction: column; gap: 1.3em; }
      .card-block { width: 92vw; }
      .modal-content img { width: 98vw; }
    }
    @media (max-width: 768px) {
      .logo-block { flex-direction: column; text-align: center; }
      .logo-block img { margin: 1em 0; }
      .logo-text.left, .logo-text.right { text-align: center; }
      .overlay { padding: 0.5em; }
    }
    @keyframes fadeIn { from {opacity:0} to {opacity:1} }
    @keyframes popup { from {transform:scale(0.95)} to {transform:scale(1)} }
  </style>
</head>
<body>
  <div class="overlay">

    <div class="lang-switch" role="group" aria-label="Переключение языков">
      <span class="active" data-lang="ru">RU</span>
      <span data-lang="fr">FR</span>
      <span data-lang="by">BY</span>
      <span data-lang="ua">UA</span>
    </div>

    <header>
      <div class="logo-block">
        <div class="logo-text left" id="logo-left">
          <span>Храм</span>
          <span>Знамения</span>
        </div>
        <img src="assets/icon.gif" alt="Икона Богородицы" />
        <div class="logo-text right" id="logo-right">
          <span>Пресвятой</span>
          <span>Богородицы</span>
        </div>
      </div>
      <div class="subheading" id="subheading">
        Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат
      </div>
    </header>

    <div class="notice" id="notice">Сайт в разработке</div>

    <div class="schedule">
      <div class="schedule-label" id="schedule-label-1">Расписание богослужений</div>
      <div class="schedule-month" id="current-label">ИЮЛЬ</div>
      <ul id="schedule-current"></ul>
      <div class="schedule-month" id="next-label">АВГУСТ</div>
      <ul id="schedule-next"></ul>
    </div>

    <!-- Карточки-блоки (пример: меняй под себя) -->
    <div class="blocks-row" id="main-blocks">
      <div class="card-block" data-block="history">
        <img src="assets/church_outside.jpg" alt="Вид храма" />
        <div class="card-title">История прихода</div>
        <div class="card-desc">Как всё начиналось. Кратко о главном.</div>
      </div>
      <div class="card-block" data-block="icon">
        <img src="assets/icon_inside.jpg" alt="Икона Знамения" />
        <div class="card-title">Икона Знамения</div>
        <div class="card-desc">Главная святыня храма — история и чудеса.</div>
      </div>
      <div class="card-block" data-block="schedule">
        <img src="assets/service.jpg" alt="Богослужение" />
        <div class="card-title">Богослужения</div>
        <div class="card-desc">Как устроено расписание, ответы на вопросы.</div>
      </div>
      <div class="card-block" data-block="community">
        <img src="assets/community.jpg" alt="Община" />
        <div class="card-title">Приходская жизнь</div>
        <div class="card-desc">О нашей общине, жизни вне богослужений.</div>
      </div>
    </div>

    <div class="footer" id="footer">
      87, boulevard Exelmans, Paris 75016<br />
      Métро: Exelmans (ligne 9)<br />
      ✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>
    </div>
  </div>

  <!-- Модальное окно для полной информации -->
  <div class="modal-full" id="modalFull">
    <div class="modal-content" id="modalContent">
      <button class="modal-close" id="modalClose" title="Закрыть">&times;</button>
      <!-- Динамически вставляется содержимое -->
    </div>
  </div>

  <script>
    // --- translations, полный как в твоём шаблоне ---
    const translations = {
      ru: {
        logoLeft: ["Храм", "Знамения"],
        logoRight: ["Пресвятой", "Богородицы"],
        subheading: "Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат",
        notice: "Сайт в разработке",
        scheduleLabel1: "Расписание богослужений",
        currentLabel: "ИЮЛЬ",
        scheduleCurrent: [
          "<strong>5 суббота, 18:00</strong>&nbsp;&ndash; Всенощная (Неделя 4-я по Пятидесятнице) Глас 3-й",
          "<strong>6 воскресенье, 10:30</strong>&nbsp;&ndash; Литургия (Владимирской иконы Божией Матери)",
          "<strong>7 понедельник, 10:00</strong>&nbsp;&ndash; Литургия (Рождество Крестителя Господня Иоанна)",
          "<strong>12 суббота, 10:00</strong>&nbsp;&ndash; Литургия (Святых апостолов Петра и Павла)",
          "<strong>12 суббота, 18:00</strong>&nbsp;&ndash; Всенощная (Неделя 5-я по Пятидесятнице) Глас 4-й",
          "<strong>13 воскресенье, 10:30</strong>&nbsp;&ndash; Литургия (Собор Святых 12-ти апостолов)",
          "<strong>19 суббота, 18:00</strong>&nbsp;&ndash; Всенощная (Неделя 6-я по Пятидесятнице) Глас 5-й",
          "<strong>20 воскресенье, 10:30</strong>&nbsp;&ndash; Литургия (Прп. Евдокии, вел. кн. Московской)",
          "<strong>26 суббота, 18:00</strong>&nbsp;&ndash; Всенощная (Неделя 7-я по Пятидесятнице) Глас 6-й",
          "<strong>27 воскресенье, 10:30</strong>&nbsp;&ndash; Литургия (Свв. отцов шести Вселенских Соборов)",
          "<strong>28 понедельник, 10:00</strong>&nbsp;&ndash; Литургия (Св. Великого Князя Владимира)"
        ],
        nextLabel: "АВГУСТ",
        scheduleNext: [
          "<strong>16 суббота, 18:00</strong>&nbsp;&ndash; Всенощная (Неделя 10-я по Пятидесятнице) Глас 1-й",
          "<strong>17 воскресенье, 10:30</strong>&nbsp;&ndash; Литургия (Свв. семи отроков, иже во Ефесе)",
          "<strong>18 понедельник, 18:00</strong>&nbsp;&ndash; Всенощная (Преображение Господне)",
          "<strong>19 вторник, 10:00</strong>&nbsp;&ndash; Литургия/Освящение воды и фруктов (Преображение Господне&nbsp;&ndash; Второй Спас)",
          "__custom__<div style='text-align:center; color:#b7523b; font-weight:bold; margin:0.7em 0;'>Храм закрывается до Успения</div>",
          "<strong>27 среда, 18:00</strong>&nbsp;&ndash; Всенощная (Успение Пресвятой Богородицы)",
          "<strong>28 четверг, 10:00</strong>&nbsp;&ndash; Литургия (Успение Пресвятой Богородицы)"
        ],
        footer: `87, boulevard Exelmans, Paris 75016<br />Метро: Exelmans (ligne 9)<br />✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>`
      }
      // Остальные языки как обычно...
    };

    const langSwitchers = document.querySelectorAll('.lang-switch span');
    const logoLeft = document.getElementById('logo-left');
    const logoRight = document.getElementById('logo-right');
    const subheading = document.getElementById('subheading');
    const notice = document.getElementById('notice');
    const scheduleLabel1 = document.getElementById('schedule-label-1');
    const currentLabel = document.getElementById('current-label');
    const nextLabel = document.getElementById('next-label');
    const scheduleCurrent = document.getElementById('schedule-current');
    const scheduleNext = document.getElementById('schedule-next');
    const footer = document.getElementById('footer');

    // ---- Автоматическое "серение" по дате и времени ----
    function parseDateTime(text, monthLabel) {
      const months = {
        'ЯНВАРЬ': 0, 'ФЕВРАЛЬ': 1, 'МАРТ': 2, 'АПРЕЛЬ': 3, 'МАЙ': 4, 'ИЮНЬ': 5, 'ИЮЛЬ': 6, 'АВГУСТ': 7,
        'СЕНТЯБРЬ': 8, 'ОКТЯБРЬ': 9, 'НОЯБРЬ': 10, 'ДЕКАБРЬ': 11
      };
      const m = text.match(/<strong>(\d+)[^\d]*(?:, )?(\d{1,2}):(\d{2})<\/strong>/i);
      if (!m) return null;
      let day = parseInt(m[1]), hour = parseInt(m[2]), minute = parseInt(m[3]);
      let month = months[monthLabel.toUpperCase()] ?? new Date().getMonth();
      let now = new Date(), year = now.getFullYear();
      if (month < now.getMonth() - 1) year += 1;
      return new Date(year, month, day, hour, minute);
    }

    // ------- Спойлер для расписания --------
    function renderSchedule(list, monthLabel) {
      const now = new Date();
      // первые 4 строки, остальные под спойлер
      const visible = list.slice(0, 4);
      const hidden = list.slice(4);
      let html = visible.map(text => {
        if (text.startsWith("__custom__")) return text.replace("__custom__", "");
        let dt = parseDateTime(text, monthLabel), isPast = false;
        if (dt) isPast = (now.getTime() - dt.getTime()) > 2 * 60 * 60 * 1000;
        return `<li${isPast ? ' class="past"' : ''}>${text}</li>`;
      }).join('');
      if (hidden.length > 0) {
        html += `<div class="schedule-spoiler" id="showMore-${monthLabel}">Показать все службы</div>
        <ul id="hiddenSchedule-${monthLabel}" style="display:none;">
          ${hidden.map(text => {
            if (text.startsWith("__custom__")) return text.replace("__custom__", "");
            let dt = parseDateTime(text, monthLabel), isPast = false;
            if (dt) isPast = (now.getTime() - dt.getTime()) > 2 * 60 * 60 * 1000;
            return `<li${isPast ? ' class="past"' : ''}>${text}</li>`;
          }).join('')}
        </ul>`;
      }
      return html;
    }

    function setLang(lang) {
      langSwitchers.forEach(s => s.classList.remove('active'));
      document.querySelector(`.lang-switch span[data-lang="${lang}"]`).classList.add('active');
      logoLeft.innerHTML = `<span>${translations[lang].logoLeft[0]}</span><span>${translations[lang].logoLeft[1]}</span>`;
      logoRight.innerHTML = `<span>${translations[lang].logoRight[0]}</span><span>${translations[lang].logoRight[1]}</span>`;
      subheading.innerText = translations[lang].subheading;
      notice.innerText = translations[lang].notice;
      scheduleLabel1.innerText = translations[lang].scheduleLabel1;
      currentLabel.innerText = translations[lang].currentLabel;
      nextLabel.innerText = translations[lang].nextLabel;
      scheduleCurrent.innerHTML = renderSchedule(translations[lang].scheduleCurrent, translations[lang].currentLabel);
      scheduleNext.innerHTML = renderSchedule(translations[lang].scheduleNext, translations[lang].nextLabel);
      footer.innerHTML = translations[lang].footer;

      // Подключить спойлеры после отрисовки
      setTimeout(() => {
        setupSpoilers(translations[lang].currentLabel);
        setupSpoilers(translations[lang].nextLabel);
      }, 50);
    }

    function setupSpoilers(monthLabel) {
      const btn = document.getElementById(`showMore-${monthLabel}`);
      const ul = document.getElementById(`hiddenSchedule-${monthLabel}`);
      if (!btn || !ul) return;
      btn.onclick = function () {
        ul.style.display = (ul.style.display === "none") ? "block" : "none";
        btn.innerText = ul.style.display === "block" ? "Скрыть дополнительные" : "Показать все службы";
      };
    }

    langSwitchers.forEach(s => {
      s.onclick = () => setLang(s.dataset.lang);
    });

    setLang('ru');

    // --- Карточки с раскрытием ---
    const cardBlocks = document.querySelectorAll('.card-block');
    const modalFull = document.getElementById('modalFull');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');

    // Пример наполнения — меняй по вкусу!
    const cardDetails = {
      history: {
        img: "assets/church_outside.jpg",
        title: "История прихода",
        text: `
          <p>Приход во имя Знамения Пресвятой Богородицы основан в 19XX году. Здесь служили выдающиеся священнослужители, здесь совершаются таинства и продолжается молитвенная традиция.</p>
          <p>Подробнее о наших святынях, настоятелях, событиях — на этой странице.</p>
        `
      },
      icon: {
        img: "assets/icon_inside.jpg",
        title: "Икона Знамения",
        text: `
          <p>Главная святыня храма — икона Божией Матери "Знамение". История, почитание, чудеса, связанные с ней.</p>
          <p>Здесь вы узнаете о празднике, особенностях и молитвах перед этой иконой.</p>
        `
      },
      schedule: {
        img: "assets/service.jpg",
        title: "Богослужения",
        text: `
          <p>В храме совершаются все основные богослужения: Литургии, Всенощные, молебны и панихиды. Расписание обновляется ежемесячно.</p>
          <p>О правилах посещения, особенностях службы — здесь.</p>
        `
      },
      community: {
        img: "assets/community.jpg",
        title: "Приходская жизнь",
        text: `
          <p>Наш приход — это не только молитва, но и дружба, взаимопомощь, совместные праздники и встречи. Мы рады всем, кто хочет быть частью общины!</p>
          <p>Ближайшие мероприятия, фото и контакты для связи — здесь.</p>
        `
      }
    };

    cardBlocks.forEach(card => {
      card.onclick = () => {
        const key = card.getAttribute('data-block');
        if (!cardDetails[key]) return;
        modalContent.innerHTML = `
          <button class="modal-close" id="modalClose" title="Закрыть">&times;</button>
          <img src="${cardDetails[key].img}" alt="${cardDetails[key].title}">
          <div class="modal-title">${cardDetails[key].title}</div>
          <div>${cardDetails[key].text}</div>
        `;
        modalFull.classList.add('open');
        document.body.style.overflow = 'hidden';
        document.getElementById('modalClose').onclick = closeModal;
      };
    });

    function closeModal() {
      modalFull.classList.remove('open');
      document.body.style.overflow = '';
    }
    modalFull.onclick = function(e) {
      if (e.target === modalFull) closeModal();
    }
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") closeModal();
    });
  </script>
</body>
</html>
