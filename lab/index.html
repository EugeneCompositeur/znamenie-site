<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Храм Знамения Пресвятой Богородицы в Париже</title>
  <meta name="description" content="Официальный сайт Храма Знамения Пресвятой Богородицы в Париже. Православное расписание богослужений, адрес, контакты." />
  <meta name="keywords" content="храм, православие, Париж, Богородица, Église Orthodoxe, Notre-Dame du Signe, Paris, богослужение, расписание, православный приход, церковь" />
  <link rel="icon" href="assets/icon2.gif" type="image/gif" />
  <link href="https://fonts.googleapis.com/css2?family=Forum&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #ede7df;
      --bg-strip: #e3dbcd;
      --blue: #1939a5;
      --blue-light: #2348d4;
      --border-blue: #e4e7f3;
      --blue-shadow: #1939a540;
      --blue-shadow-strong: #1939a599;
      --shadow-main: 0 6px 54px #1939a511, 0 1.5px 10px #cab9a912;
      --icon-shadow: 0 8px 28px #2348d422, 0 0px 4px #fff7;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Open Sans', sans-serif;
      background: var(--bg);
      min-height: 100vh;
      color: #23232b;
    }
    body {
      min-height: 100vh;
      box-sizing: border-box;
      margin: 0;
    }
    .lang-bar {
      width: 100vw;
      background: var(--bg-strip);
      height: 2.6em;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 50;
      font-family: 'Open Sans', sans-serif;
      box-shadow: 0 1.5px 8px #bbb4a22a;
    }
    .lang-switch {
      margin-right: 1.8em;
      font-size: 1.03em;
      display: flex;
      gap: 0.85em;
      align-items: center;
    }
    .lang-switch span {
      cursor: pointer;
      color: #7c7c7c;
      font-weight: 600;
      letter-spacing: 0.13em;
      padding: 0.04em 0.15em;
      border-radius: 2px;
      background: none;
      font-size: 0.98em;
      transition: color 0.23s;
      user-select: none;
    }
    .lang-switch span.active {
      color: var(--blue);
      font-weight: 700;
      background: none;
    }
    .lang-switch span:hover {
      color: var(--blue-light);
    }
    /* HEADER */
    .main-header {
      margin-top: 2.9em; /* чтобы не залезать под языки */
      margin-bottom: 1.2em;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      user-select: none;
    }
    .logo-block {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 1.1em;
      margin-bottom: 0.55em;
    }
    .logo-text {
      font-family: 'Forum', serif;
      font-size: 2.7em;
      color: var(--blue);
      font-weight: 400;
      letter-spacing: 0.01em;
      text-align: center;
      line-height: 1.07;
      filter: drop-shadow(0 2.5px 0.5px #e5e7f2cc)
              drop-shadow(0 0 14px #e3eaff22);
      text-shadow: 0 8px 18px #fff5, 0 1px 1px #e2eaf911;
    }
    .logo-text.left {
      margin-right: 0.15em;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      justify-content: center;
      line-height: 1.09;
    }
    .logo-text.right {
      margin-left: 0.15em;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      line-height: 1.09;
    }
    .logo-block img {
      height: 90px;
      width: 90px;
      min-width: 64px;
      margin: 0 0.8em;
      display: block;
      filter: drop-shadow(0 7px 14px #b3bbff55) drop-shadow(0 1px 5px #1939a526);
      box-shadow: var(--icon-shadow);
      border-radius: 60px;
      background: #f4f7fa;
      padding: 0.3em;
      transition: box-shadow 0.23s;
    }
    .subheading {
      font-size: 1.07em;
      margin-top: 0.35em;
      margin-bottom: 0.25em;
      font-family: 'Forum', serif;
      color: #9a927f;
      letter-spacing: 0.01em;
      text-align: center;
      filter: drop-shadow(0 2.5px 0.5px #ede1cc77);
    }
    /* Отцентровка заголовка по центру блока */
    .header-center {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      width: 100%;
      gap: 1.4em;
      margin: 0 auto;
    }
    /* ШАПКА MOBILE */
    @media (max-width: 600px) {
      .main-header { margin-top: 2.2em;}
      .logo-block img { height: 61px; width: 61px; }
      .logo-text { font-size: 1.21em; }
      .subheading { font-size: 0.90em;}
      .header-center { gap: 0.6em;}
    }
    /* СИНИЙ БЛОК РАСПИСАНИЯ */
    .schedule-outer {
      width: 100vw;
      left: 0; right: 0;
      background: var(--blue);
      margin: 0;
      margin-bottom: 0;
      padding: 0;
      position: relative;
      min-height: 0.01em;
      z-index: 2;
      overflow: visible;
      box-shadow: 0 4px 36px #1939a518;
    }
    .schedule-box {
      max-width: 1050px;
      margin: 0 auto;
      padding: 1.5em 2.3em 1.1em 3.5em;
      position: relative;
      box-sizing: border-box;
    }
    .schedule-box-inner {
      border: 0;
      border-radius: 0;
      padding: 0;
      margin: 0;
      position: relative;
    }
    .schedule-border {
      position: absolute;
      top: 0.8em; left: 0.8em; right: 0.8em; bottom: 0.8em;
      pointer-events: none;
      border: double 3px var(--border-blue);
      border-radius: 0.27em;
      z-index: 1;
      opacity: 0.7;
    }
    .schedule-list {
      list-style: none;
      margin: 0 0 0.1em 0;
      padding: 0;
      color: #fff;
      font-size: 1.18em;
      line-height: 1.4;
      font-weight: 400;
      text-align: left;
      /* плотнее при мобиле */
    }
    .schedule-list li {
      margin-bottom: 0.18em;
      padding-left: 0;
      display: flex;
      align-items: baseline;
    }
    .schedule-list span.strong {
      font-weight: 700;
      color: #fff;
      font-size: 1em;
      letter-spacing: 0.01em;
    }
    /* СТРЕЛКА РАСКРЫТИЯ */
    .schedule-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin: 0.12em auto 0.19em auto;
      width: 100%;
      height: 1.7em;
      background: none;
      border: none;
      outline: none;
      transition: background 0.13s;
      z-index: 10;
      position: relative;
    }
    .schedule-toggle:active {
      background: #e7e7fd16;
    }
    .schedule-arrow {
      border: solid #fff;
      border-width: 0 0 2.8px 2.8px;
      display: inline-block;
      padding: 0.22em;
      margin: 0 auto;
      width: 1.2em;
      height: 1.2em;
      transform: rotate(45deg);
      transition: transform 0.24s;
      margin-top: 0.13em;
    }
    .schedule-toggle.open .schedule-arrow {
      transform: rotate(-135deg);
    }
    /* РАСКРЫТИЕ */
    .schedule-all {
      max-height: 0;
      overflow: hidden;
      opacity: 0.12;
      transition: max-height 0.48s cubic-bezier(0.55,0.1,0.41,0.91), opacity 0.33s;
      background: none;
      z-index: 30;
      position: relative;
      pointer-events: none;
    }
    .schedule-all.open {
      max-height: 400px;
      opacity: 0.98;
      transition: max-height 0.7s cubic-bezier(0.18,0.9,0.45,0.94), opacity 0.33s;
      pointer-events: auto;
      z-index: 99;
    }
    /* Overlay при раскрытии */
    .schedule-overlay {
      display: none;
      position: absolute;
      left: 0; right: 0;
      top: 0; bottom: 0;
      background: #e4eaf744;
      z-index: 35;
      pointer-events: none;
      border-radius: 0.27em;
    }
    .schedule-all.open ~ .schedule-overlay {
      display: block;
    }
    /* При раскрытии накладываем блок */
    .schedule-outer.expanded ~ .main-blocks-row {
      position: relative;
      z-index: 1;
    }
    .main-blocks-row.overlayed {
      filter: blur(0.5px) brightness(0.97);
      opacity: 0.63;
      pointer-events: none;
      transition: opacity 0.36s, filter 0.36s;
    }
    /* КАРТОЧКИ-БЛОКИ */
    .main-blocks-row {
      display: flex;
      flex-wrap: wrap;
      gap: 2.1em;
      justify-content: center;
      margin: 2.8em auto 0 auto;
      max-width: 1050px;
      z-index: 0;
      position: relative;
      transition: filter 0.36s, opacity 0.36s;
    }
    .card-block {
      background: #fff;
      border-radius: 7px;
      box-shadow: 0 4px 28px #1939a51a;
      width: 260px;
      min-width: 200px;
      cursor: pointer;
      transition: transform 0.22s, box-shadow 0.3s;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 310px;
      z-index: 3;
      margin-bottom: 1.8em;
    }
    .card-block:hover {
      transform: scale(1.028);
      box-shadow: 0 10px 40px #1939a532;
    }
    .card-block img {
      width: 100%;
      height: 134px;
      object-fit: cover;
      border-top-left-radius: 7px;
      border-top-right-radius: 7px;
    }
    .card-title {
      font-family: 'Forum', serif;
      font-size: 1.13em;
      color: var(--blue);
      margin: 0.9em 0 0.54em 0;
      font-weight: 600;
      letter-spacing: 0.01em;
      text-align: center;
    }
    .card-desc {
      font-size: 1em;
      color: #474747;
      margin-bottom: 1em;
      padding: 0 1em;
      text-align: center;
    }
    /* MODAL */
    .modal-full {
      display: none;
      position: fixed;
      z-index: 2000;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(25, 57, 165, 0.12);
      backdrop-filter: blur(2.8px);
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.23s;
    }
    .modal-full.open {
      display: flex;
    }
    .modal-content {
      background: #fff;
      border-radius: 13px;
      max-width: 93vw;
      max-height: 92vh;
      overflow-y: auto;
      box-shadow: 0 8px 80px #1939a533;
      padding: 2em 2em 1.7em 2em;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.2em;
      min-width: 270px;
      animation: popup 0.22s;
    }
    .modal-content img {
      width: 320px;
      max-width: 90vw;
      border-radius: 13px;
      object-fit: cover;
      margin-bottom: 1.1em;
      box-shadow: 0 2px 24px #1939a515;
    }
    .modal-title {
      font-family: 'Forum', serif;
      color: var(--blue);
      font-size: 1.41em;
      font-weight: 700;
      margin-bottom: 0.21em;
      text-align: center;
    }
    .modal-close {
      position: absolute;
      top: 0.8em;
      right: 1.2em;
      font-size: 2.3em;
      color: #bbb;
      background: none;
      border: none;
      cursor: pointer;
      transition: color 0.2s;
      z-index: 100;
    }
    .modal-close:hover {
      color: var(--blue);
    }
    /* FOOTER */
    .footer {
      margin-top: 2.5em;
      margin-bottom: 0.5em;
      font-size: 1.03em;
      color: #666;
      text-align: center;
      letter-spacing: 0.01em;
      padding-bottom: 1.2em;
      font-family: 'Open Sans', sans-serif;
    }
    .footer a {
      color: var(--blue);
      text-decoration: underline;
    }
    /* Адаптив */
    @media (max-width: 1200px) {
      .main-blocks-row { gap: 1.1em; }
      .schedule-box { padding-left: 1.3em; padding-right: 1.3em;}
    }
    @media (max-width: 820px) {
      .main-blocks-row { gap: 0.6em; }
      .schedule-box { padding-left: 0.7em; padding-right: 0.7em;}
      .logo-block img { margin: 0 0.3em;}
    }
    @media (max-width: 650px) {
      .logo-block { gap: 0.5em;}
      .main-blocks-row { flex-direction: column; gap: 0.6em;}
      .card-block { width: 95vw; min-width: 80vw; }
      .modal-content img { width: 96vw; }
      .main-header { margin-top: 2.8em;}
    }
    @media (max-width: 500px) {
      .schedule-box { padding-left: 0.33em; padding-right: 0.33em;}
      .logo-text { font-size: 1em;}
      .logo-block img { height: 37px; width: 37px; min-width: 36px;}
    }
    @keyframes fadeIn { from {opacity:0} to {opacity:1} }
    @keyframes popup { from {transform:scale(0.95)} to {transform:scale(1)} }
  </style>
</head>
<body>
  <!-- Языковая панель -->
  <div class="lang-bar">
    <div class="lang-switch" role="group" aria-label="Переключение языков">
      <span class="active" data-lang="ru">RU</span>
      <span data-lang="fr">FR</span>
      <span data-lang="by">BY</span>
      <span data-lang="ua">UA</span>
    </div>
  </div>
  <!-- Хедер -->
  <header class="main-header">
    <div class="logo-block header-center">
      <div class="logo-text left" id="logo-left">
        <span>Храм</span>
        <span>Знамения</span>
      </div>
      <img src="assets/icon2.gif" alt="Икона Богородицы" />
      <div class="logo-text right" id="logo-right">
        <span>Пресвятой</span>
        <span>Богородицы</span>
      </div>
    </div>
    <div class="subheading" id="subheading">
      Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат
    </div>
  </header>
  <!-- Блок расписания -->
  <div class="schedule-outer" id="scheduleOuter">
    <div class="schedule-box">
      <div class="schedule-box-inner">
        <div class="schedule-border"></div>
        <ul class="schedule-list" id="scheduleList">
          <!-- Строки расписания сюда -->
        </ul>
        <button class="schedule-toggle" id="scheduleToggle" title="Открыть полное расписание" aria-expanded="false">
          <span class="schedule-arrow"></span>
        </button>
        <div class="schedule-all" id="scheduleAll"></div>
        <div class="schedule-overlay"></div>
      </div>
    </div>
  </div>
  <!-- Карточки -->
  <div class="main-blocks-row" id="mainBlocks">
    <div class="card-block" data-block="history">
      <img src="assets/church_outside.jpg" alt="Вид храма" />
      <div class="card-title">История прихода</div>
      <div class="card-desc">Как всё начиналось. Кратко о главном.</div>
    </div>
    <div class="card-block" data-block="icon">
      <img src="assets/icon_inside.jpg" alt="Икона Знамения" />
      <div class="card-title">Икона Знамения</div>
      <div class="card-desc">Главная святыня храма — история и чудеса.</div>
    </div>
    <div class="card-block" data-block="schedule">
      <img src="assets/service.jpg" alt="Богослужение" />
      <div class="card-title">Богослужения</div>
      <div class="card-desc">Как устроено расписание, ответы на вопросы.</div>
    </div>
    <div class="card-block" data-block="community">
      <img src="assets/movement_blanc.jpg" alt="Белое движение" />
      <div class="card-title">Приходская жизнь</div>
      <div class="card-desc">О нашей общине, жизни вне богослужений.</div>
    </div>
  </div>
  <!-- Модальное окно для карточек -->
  <div class="modal-full" id="modalFull">
    <div class="modal-content" id="modalContent">
      <button class="modal-close" id="modalClose" title="Закрыть">&times;</button>
      <!-- Динамически вставляется содержимое -->
    </div>
  </div>
  <!-- Footer -->
  <div class="footer" id="footer">
    87, boulevard Exelmans, Paris 75016<br />
    Métро: Exelmans (ligne 9)<br />
    ✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>
  </div>
  <!-- JS -->
  <script>
    // --- ТВОЁ РАСПИСАНИЕ ---
    const scheduleData = [
      { date: "2024-08-16T18:00:00", text: "<span class='strong'>16 суббота, 18:00</span> – Всенощная (Неделя 10-я по Пятидесятнице) Глас 1-й" },
      { date: "2024-08-17T10:30:00", text: "<span class='strong'>17 воскресенье, 10:30</span> – Литургия (Свв. семи отроков, иже во Ефесе)" },
      { date: "2024-08-18T18:00:00", text: "<span class='strong'>18 понедельник, 18:00</span> – Всенощная (Преображение Господне)" },
      { date: "2024-08-19T10:00:00", text: "<span class='strong'>19 вторник, 10:00</span> – Литургия/Освящение воды и фруктов (Преображение Господне – Второй Спас)" },
      { date: "2024-08-27T18:00:00", text: "<span class='strong'>27 среда, 18:00</span> – Всенощная (Успение Пресвятой Богородицы)" },
      { date: "2024-08-28T10:00:00", text: "<span class='strong'>28 четверг, 10:00</span> – Литургия (Успение Пресвятой Богородицы)" }
    ];
    // Показать первые N, остальные — в спойлере
    const VISIBLE_COUNT = 2;
    function getUpcoming() {
      // Оставляем только службы, которые не прошли (полтора часа от начала)
      const now = new Date();
      return scheduleData.filter(item => {
        const dt = new Date(item.date);
        return now.getTime() < dt.getTime() + 90 * 60000;
      });
    }
    function renderSchedule() {
      const upcoming = getUpcoming();
      const visible = upcoming.slice(0, VISIBLE_COUNT);
      const hidden = upcoming.slice(VISIBLE_COUNT);
      document.getElementById('scheduleList').innerHTML = visible.map(e => `<li>${e.text}</li>`).join('');
      document.getElementById('scheduleAll').innerHTML = hidden.length
        ? `<ul class="schedule-list">${hidden.map(e => `<li>${e.text}</li>`).join('')}</ul>` : "";
      // Показываем стрелку только если есть скрытые
      document.getElementById('scheduleToggle').style.display = hidden.length ? "flex" : "none";
    }
    // Анимация и overlay
    const scheduleToggle = document.getElementById('scheduleToggle');
    const scheduleAll = document.getElementById('scheduleAll');
    const scheduleOuter = document.getElementById('scheduleOuter');
    const mainBlocks = document.getElementById('mainBlocks');
    let expanded = false;
    function toggleSchedule(e) {
      expanded = !expanded;
      scheduleToggle.classList.toggle('open', expanded);
      scheduleAll.classList.toggle('open', expanded);
      scheduleOuter.classList.toggle('expanded', expanded);
      mainBlocks.classList.toggle('overlayed', expanded);
      scheduleToggle.setAttribute('aria-expanded', expanded ? "true" : "false");
    }
    scheduleToggle.addEventListener('click', toggleSchedule);
    // Языки (добавь расширение для других языков по аналогии)
    const langSwitchers = document.querySelectorAll('.lang-switch span');
    langSwitchers.forEach(s => {
      s.onclick = () => {
        langSwitchers.forEach(el => el.classList.remove('active'));
        s.classList.add('active');
        // setLang(s.dataset.lang); // поддержка мультиязычности
      };
    });
    // MODAL для карточек
    const cardDetails = {
      history: {
        img: "assets/church_outside.jpg",
        title: "История прихода",
        text: `<p>Приход во имя Знамения Пресвятой Богородицы основан в 19XX году...</p>`
      },
      icon: {
        img: "assets/icon_inside.jpg",
        title: "Икона Знамения",
        text: `<p>Главная святыня храма — икона Божией Матери "Знамение". История, почитание, чудеса...</p>`
      },
      schedule: {
        img: "assets/service.jpg",
        title: "Богослужения",
        text: `<p>В храме совершаются все основные богослужения...</p>`
      },
      community: {
        img: "assets/community.jpg",
        title: "Приходская жизнь",
        text: `<p>Наш приход — это не только молитва, но и дружба, совместные праздники...</p>`
      }
    };
    const cardBlocks = document.querySelectorAll('.card-block');
    const modalFull = document.getElementById('modalFull');
    const modalContent = document.getElementById('modalContent');
    function openModal(key) {
      const data = cardDetails[key];
      if (!data) return;
      modalContent.innerHTML = `
        <button class="modal-close" id="modalClose" title="Закрыть">&times;</button>
        <img src="${data.img}" alt="${data.title}">
        <div class="modal-title">${data.title}</div>
        <div>${data.text}</div>
      `;
      modalFull.classList.add('open');
      document.body.style.overflow = 'hidden';
      document.getElementById('modalClose').onclick = closeModal;
    }
    function closeModal() {
      modalFull.classList.remove('open');
      document.body.style.overflow = '';
    }
    cardBlocks.forEach(card => {
      card.onclick = () => openModal(card.getAttribute('data-block'));
    });
    modalFull.onclick = function(e) {
      if (e.target === modalFull) closeModal();
    }
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") closeModal();
    });
    // Начальный рендер
    renderSchedule();
    // Обновлять расписание раз в минуту
    setInterval(renderSchedule, 60000);
  </script>
</body>
</html>
