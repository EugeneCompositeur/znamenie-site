<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Храм Знамения Пресвятой Богородицы в Париже</title>
  <link rel="icon" href="assets/icon.gif" type="image/gif" />
  <link href="https://fonts.googleapis.com/css2?family=Forum&family=Open+Sans&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bogoroditsa-blue: #1939A5;
      --bogoroditsa-blue-dark: #16297d;
      --page-bg: #f4ede1;
    }
    body {
      margin: 0;
      padding: 0;
      background: var(--page-bg);
      font-family: 'Open Sans', sans-serif;
      color: #222;
      text-align: center;
    }
    .overlay {
      padding: 2em 1em 0 1em;
      max-width: 1100px;
      margin: 0 auto;
      min-height: 100vh;
    }
    .lang-switch {
      position: absolute;
      top: 1.2em;
      right: 2.2em;
      font-size: 1em;
      display: flex;
      gap: 0.7em;
      z-index: 100;
      font-family: 'Open Sans', sans-serif;
    }
    .lang-switch span {
      cursor: pointer;
      color: #666;
      font-weight: 500;
      transition: color 0.2s;
      letter-spacing: 0.1em;
    }
    .lang-switch span.active {
      color: var(--bogoroditsa-blue);
      font-weight: 700;
    }
    .lang-switch span:hover {
      color: var(--bogoroditsa-blue-dark);
    }
    header {
      margin-top: 1em;
      margin-bottom: 2em;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .logo-block {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      width: 100%;
      gap: 1.5em;
      margin-bottom: 0.7em;
    }
    .logo-text {
      font-family: 'Forum', serif;
      font-size: 2.7em;
      font-weight: 400;
      color: var(--bogoroditsa-blue);
      line-height: 1.05;
      letter-spacing: 0.02em;
      white-space: pre-line;
      user-select: none;
    }
    .logo-block img {
      height: 112px;
      margin: 0 1.4em;
      filter: drop-shadow(0 2px 18px #1939a512);
    }
    .subheading {
      font-family: 'Forum', serif;
      font-size: 1.07em;
      margin-top: 0.7em;
      margin-bottom: 0.5em;
      color: #958d7a;
      letter-spacing: 0.01em;
      font-weight: 400;
    }

    /* РАСПИСАНИЕ (СИНЯЯ ПЛАШКА) */
    .schedule-panel {
      background: var(--bogoroditsa-blue);
      color: #fff;
      margin: 0 auto 2.3em auto;
      max-width: 1000px;
      text-align: left;
      font-size: 1.19em;
      cursor: pointer;
      padding: 2.2em 2.2em 1.3em 3.7em;
      position: relative;
      transition: background 0.19s;
      border-radius: 0; /* Без скруглений! */
      box-shadow: 0 8px 54px #1939a522;
      overflow: visible;
      min-width: 330px;
      user-select: none;
    }
    .schedule-panel .month {
      display: none; /* Месяц скрыт */
    }
    .schedule-panel .panel-title {
      font-family: 'Forum', serif;
      font-size: 2em;
      color: #fff;
      font-weight: 400;
      margin-bottom: 1.5em;
      letter-spacing: 0.06em;
      text-align: left;
    }
    .schedule-panel ul {
      list-style: none;
      padding: 0;
      margin: 0;
      margin-bottom: 0.7em;
    }
    .schedule-panel li {
      margin-bottom: 0.32em;
      font-size: 1.13em;
      font-family: 'Open Sans', sans-serif;
      color: #dde2ff;
      line-height: 1.6;
    }
    .schedule-panel li strong {
      color: #fff;
      font-weight: 700;
      letter-spacing: 0.01em;
    }
    .schedule-panel li.past {
      color: #93a2c4;
    }
    .panel-footer {
      font-size: 1em;
      color: #fff;
      opacity: 0.9;
      text-decoration: underline;
      text-align: left;
      margin-top: 1.1em;
      transition: color 0.16s;
      display: inline-block;
      cursor: pointer;
      padding-left: 0.2em;
      font-family: 'Open Sans', sans-serif;
    }
    .panel-footer:hover {
      color: #b3c6fa;
    }
    .panel-expanded {
      padding-bottom: 2.1em;
      transition: padding-bottom 0.25s;
    }
    .hidden-schedule {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: max-height 0.42s cubic-bezier(.28,.91,.52,1), opacity 0.3s;
    }
    .schedule-panel.expanded .hidden-schedule {
      opacity: 1;
      max-height: 900px;
      margin-top: 1.3em;
      margin-bottom: 0;
    }
    /* --- */
    .footer {
      margin-top: 3em;
      font-size: 1em;
      color: #555;
    }
    @media (max-width: 900px) {
      .logo-text { font-size: 2em; }
      .schedule-panel { font-size: 1em; padding: 1.5em 0.7em 1em 1.3em; }
    }
    @media (max-width: 700px) {
      .overlay { padding: 0.2em 0.2em 0 0.2em; }
      .logo-block img { height: 70px; margin: 0 0.4em; }
      .logo-text { font-size: 1.1em; }
      .schedule-panel { font-size: 0.97em; padding: 1.1em 0.1em 0.7em 0.7em; min-width: 0; }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <div class="lang-switch" role="group" aria-label="Переключение языков">
      <span class="active" data-lang="ru">RU</span>
      <span data-lang="fr">FR</span>
      <span data-lang="by">BY</span>
      <span data-lang="ua">UA</span>
    </div>

    <header>
      <div class="logo-block">
        <div class="logo-text" id="logo-left">
          <span>Храм</span>
          <span>Знамения</span>
        </div>
        <img src="assets/icon2.gif" alt="Икона Богородицы" />
        <div class="logo-text" id="logo-right">
          <span>Пресвятой</span>
          <span>Богородицы</span>
        </div>
      </div>
      <div class="subheading" id="subheading">
        Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат
      </div>
    </header>

    <div class="schedule-panel" id="schedulePanel">
      <div class="panel-title" id="panelTitle">АВГУСТ</div>
      <ul id="mainSchedule"></ul>
      <div class="panel-footer" id="panelFooter">
        полное расписание
      </div>
      <div class="hidden-schedule" id="hiddenSchedule"></div>
    </div>

    <div class="footer" id="footer">
      87, boulevard Exelmans, Paris 75016<br />
      Métро: Exelmans (ligne 9)<br />
      ✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>
    </div>
  </div>

  <script>
    // translations — обязательно дополни для всех языков!
    const translations = {
      ru: {
        logoLeft: ["Храм", "Знамения"],
        logoRight: ["Пресвятой", "Богородицы"],
        subheading: "Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат",
        panelTitle: "АВГУСТ",
        mainSchedule: [
          "<strong>16 суббота, 18:00</strong> – Всенощная (Неделя 10-я по Пятидесятнице) Глас 1-й",
          "<strong>17 воскресенье, 10:30</strong> – Литургия (Свв. семи отроков, иже во Ефесе)"
        ],
        fullSchedule: [
          "<strong>16 суббота, 18:00</strong> – Всенощная (Неделя 10-я по Пятидесятнице) Глас 1-й",
          "<strong>17 воскресенье, 10:30</strong> – Литургия (Свв. семи отроков, иже во Ефесе)",
          "<strong>18 понедельник, 18:00</strong> – Всенощная (Преображение Господне)",
          "<strong>19 вторник, 10:00</strong> – Литургия/Освящение воды и фруктов (Преображение Господне — Второй Спас)",
          "<strong>27 среда, 18:00</strong> – Всенощная (Успение Пресвятой Богородицы)",
          "<strong>28 четверг, 10:00</strong> – Литургия (Успение Пресвятой Богородицы)"
        ],
        showFull: "полное расписание",
        hideFull: "скрыть полное расписание",
        footer: `87, boulevard Exelmans, Paris 75016<br />Метро: Exelmans (ligne 9)<br />✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>`
      },
      fr: {
        logoLeft: ["Église", "Orthodoxe"],
        logoRight: ["Notre-Dame", "du Signe"],
        subheading: "Vicariat Sainte-Marie-de-Paris et Saint-Alexis-d’Ugine – Patriarcat Œcuménique",
        panelTitle: "AOÛT",
        mainSchedule: [
          "<strong>16 samedi, 18:00</strong> – Vigiles (10<sup>ème</sup> Dimanche après la Pentecôte) 1<sup>er</sup> ton",
          "<strong>17 dimanche, 10:30</strong> – Liturgie (Sept dormants d’Ephèse)"
        ],
        fullSchedule: [
          "<strong>16 samedi, 18:00</strong> – Vigiles (10<sup>ème</sup> Dimanche après la Pentecôte) 1<sup>er</sup> ton",
          "<strong>17 dimanche, 10:30</strong> – Liturgie (Sept dormants d’Ephèse)",
          "<strong>18 lundi, 18:00</strong> – Vigiles (Transfiguration de N.S. Jésus-Christ)",
          "<strong>19 mardi, 10:00</strong> – Liturgie/ Bénédiction de l’eau et des fruits (Transfiguration)",
          "<strong>27 mercredi, 18:00</strong> – Vigiles (Dormition de la Mère de Dieu)",
          "<strong>28 jeudi, 10:00</strong> – Liturgie (Dormition de la Très Sainte Mère de Dieu)"
        ],
        showFull: "horaire complet",
        hideFull: "masquer l’horaire complet",
        footer: `87, boulevard Exelmans, Paris 75016<br />Métro : Exelmans (ligne 9)<br />✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>`
      },
      by: {
        logoLeft: ["Храм", "Знамення"],
        logoRight: ["Прасвятой", "Багародзіцы"],
        subheading: "Вікарыят імені Святых Марыі Парыжскай і Аляксея Южынскага — Сусветны Патрыярхат",
        panelTitle: "ЖНІВЕНЬ",
        mainSchedule: [
          "<strong>16 субота, 18:00</strong> – Усяночная (Тыдзень 10-ы пасля Пяцідзясятніцы) Тон 1-шы",
          "<strong>17 нядзеля, 10:30</strong> – Літургія (Свв. сямі юнакоў, што былі ў Эфесе)"
        ],
        fullSchedule: [
          "<strong>16 субота, 18:00</strong> – Усяночная (Тыдзень 10-ы пасля Пяцідзясятніцы) Тон 1-шы",
          "<strong>17 нядзеля, 10:30</strong> – Літургія (Свв. сямі юнакоў, што былі ў Эфесе)",
          "<strong>18 панядзелак, 18:00</strong> – Усяночная (Пераяўленне Гасподняе)",
          "<strong>19 аўторак, 10:00</strong> – Літургія/Асвячэнне вады і пладоў (Пераяўленне Гасподняе — Другі Спас)",
          "<strong>27 серада, 18:00</strong> – Усяночная (Успенне Прасвятой Багародзіцы)",
          "<strong>28 чацвер, 10:00</strong> – Літургія (Успенне Прасвятой Багародзіцы)"
        ],
        showFull: "поўны расклад",
        hideFull: "схаваць поўны расклад",
        footer: `87, boulevard Exelmans, Paris 75016<br />Метро: Exelmans (лінія 9)<br />✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>`
      },
      ua: {
        logoLeft: ["Храм", "Знамення"],
        logoRight: ["Пресвятої", "Богородиці"],
        subheading: "Вікаріат імені Святих Марії Паризької та Олексія Южинського — Вселенський Патріархат",
        panelTitle: "СЕРПЕНЬ",
        mainSchedule: [
          "<strong>16 субота, 18:00</strong> – Всеношна (Неділя 10-та після П’ятидесятниці) Глас 1-й",
          "<strong>17 неділя, 10:30</strong> – Літургія (Семи отроків, що у Ефесі)"
        ],
        fullSchedule: [
          "<strong>16 субота, 18:00</strong> – Всеношна (Неділя 10-та після П’ятидесятниці) Глас 1-й",
          "<strong>17 неділя, 10:30</strong> – Літургія (Семи отроків, що у Ефесі)",
          "<strong>18 понеділок, 18:00</strong> – Всеношна (Преображення Господнє)",
          "<strong>19 вівторок, 10:00</strong> – Літургія, освячення води та плодів (Преображення Господнє – Другий Спас)",
          "<strong>27 середа, 18:00</strong> – Всеношна (Успіння Пресвятої Богородиці)",
          "<strong>28 четвер, 10:00</strong> – Літургія (Успіння Пресвятої Богородиці)"
        ],
        showFull: "повний розклад",
        hideFull: "приховати розклад",
        footer: `87, boulevard Exelmans, Paris 75016<br />Метро: Exelmans (лінія 9)<br />✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>`
      }
    };

    let currentLang = 'ru';

    function isPast(text) {
      const m = text.match(/<strong>(\d+)[^\d]*(?:, )?(\d{1,2}):(\d{2})<\/strong>/i);
      if (!m) return false;
      let [day, hour, min] = [parseInt(m[1]), parseInt(m[2]), parseInt(m[3])];
      let now = new Date();
      let year = now.getFullYear();
      let month = now.getMonth() + 1; // 1-based
      if (month === 8) month = 8; // август (для теста)
      let dt = new Date(year, 7, day, hour, min); // 7 — август
      return now.getTime() - dt.getTime() > 2 * 60 * 60 * 1000;
    }

    function renderMainSchedule(lang) {
      const t = translations[lang];
      document.getElementById('logo-left').innerHTML = `<span>${t.logoLeft[0]}</span><span>${t.logoLeft[1]}</span>`;
      document.getElementById('logo-right').innerHTML = `<span>${t.logoRight[0]}</span><span>${t.logoRight[1]}</span>`;
      document.getElementById('subheading').innerText = t.subheading;
      document.getElementById('panelTitle').innerText = t.panelTitle;
      document.getElementById('footer').innerHTML = t.footer;

      // Краткое расписание (только основные службы)
      document.getElementById('mainSchedule').innerHTML = t.mainSchedule.map(
        text => `<li${isPast(text) ? ' class="past"' : ''}>${text}</li>`
      ).join('');

      // Скрытое расписание (все остальные службы, которых нет среди первых)
      let extra = t.fullSchedule.slice(t.mainSchedule.length);
      document.getElementById('hiddenSchedule').innerHTML = extra.map(
        text => `<li${isPast(text) ? ' class="past"' : ''}>${text}</li>`
      ).join('');
      document.getElementById('hiddenSchedule').style.maxHeight = "0";
      document.getElementById('hiddenSchedule').style.opacity = "0";
      document.getElementById('panelFooter').innerText = t.showFull;

      // Сбросить раскрытие
      document.getElementById('schedulePanel').classList.remove('expanded');
    }

    // Языки
    document.querySelectorAll('.lang-switch span').forEach(s => {
      s.onclick = function () {
        document.querySelectorAll('.lang-switch span').forEach(x => x.classList.remove('active'));
        s.classList.add('active');
        currentLang = s.dataset.lang;
        renderMainSchedule(currentLang);
      };
    });

    // Открытие/скрытие расписания
    const schedulePanel = document.getElementById('schedulePanel');
    let expanded = false;
    schedulePanel.onclick = function (e) {
      // Только если клик не по ссылке в футере!
      if (e.target.closest('a')) return;
      expanded = !expanded;
      const t = translations[currentLang];
      if (expanded) {
        schedulePanel.classList.add('expanded');
        document.getElementById('hiddenSchedule').style.maxHeight = "900px";
        document.getElementById('hiddenSchedule').style.opacity = "1";
        document.getElementById('panelFooter').innerText = t.hideFull;
      } else {
        schedulePanel.classList.remove('expanded');
        document.getElementById('hiddenSchedule').style.maxHeight = "0";
        document.getElementById('hiddenSchedule').style.opacity = "0";
        document.getElementById('panelFooter').innerText = t.showFull;
      }
    };

    renderMainSchedule(currentLang);
  </script>
</body>
</html>
