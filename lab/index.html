<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Храм Знамения Пресвятой Богородицы в Париже</title>
  <meta name="description" content="Официальный сайт Храма Знамения Пресвятой Богородицы в Париже. Православное расписание богослужений, адрес, контакты." />
  <meta name="keywords" content="храм, православие, Париж, Богородица, Église Orthodoxe, Notre-Dame du Signe, Paris, богослужение, расписание, православный приход, церковь" />
  <link rel="icon" href="assets/icon.gif" type="image/gif" />
  <link href="https://fonts.googleapis.com/css2?family=Forum&family=Open+Sans&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bogoroditsa-blue: #1939A5;
      --panel-radius: 0px;
    }
    body {
      margin: 0;
      padding: 0;
      background: #f4efe5;
      font-family: 'Open Sans', sans-serif;
      color: #222;
    }
    .overlay {
      max-width: 1440px;
      margin: auto;
      position: relative;
      padding: 0 0 0 0;
    }
    /* Языки */
    .lang-switch {
      position: absolute;
      top: 1.2em;
      right: 2em;
      font-size: 1.1em;
      letter-spacing: 0.14em;
      z-index: 100;
      font-family: 'Open Sans', sans-serif;
    }
    .lang-switch span {
      cursor: pointer;
      color: #888;
      font-weight: 600;
      margin-left: 0.2em;
      margin-right: 0.1em;
      transition: color 0.2s;
    }
    .lang-switch span.active {
      color: var(--bogoroditsa-blue);
      font-weight: 700;
    }

    /* Шапка */
    header {
      margin-top: 36px;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 10px;
    }
    .logo-block {
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      justify-content: center;
      width: 100%;
      gap: 18px;
      margin-bottom: 7px;
    }
    .logo-text {
      font-family: 'Forum', serif;
      color: var(--bogoroditsa-blue);
      font-size: 2.7em;
      font-weight: 400;
      text-align: center;
      letter-spacing: 0.03em;
      line-height: 1.1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-width: 180px;
    }
    .logo-left, .logo-right {
      margin-bottom: 0;
    }
    .logo-left span, .logo-right span {
      display: block;
    }
    .logo-block img {
      height: 90px;
      width: auto;
      margin: 0 20px;
      display: block;
      filter: drop-shadow(0 2px 12px #1939a522);
    }
    .subheading {
      font-family: 'Open Sans', sans-serif;
      font-size: 1.07em;
      color: #888;
      margin-top: 0px;
      margin-bottom: 12px;
      text-align: center;
      letter-spacing: 0.01em;
    }
    /* Синяя панель расписания */
    .schedule-panel-wrap {
      position: relative;
      width: 100vw;
      left: 50%;
      right: 0;
      transform: translateX(-50%);
      margin: 0;
      padding: 0;
      z-index: 10;
      min-width: 320px;
      margin-bottom: 0;
    }
    .schedule-panel {
      background: var(--bogoroditsa-blue);
      color: #fff;
      padding: 30px 38px 20px 48px;
      font-family: 'Open Sans', sans-serif;
      border-radius: var(--panel-radius);
      margin: 0;
      box-shadow: 0 6px 64px #1939a512;
      width: 100vw;
      max-width: 100vw;
      min-width: 320px;
      min-height: unset;
      cursor: pointer;
      position: relative;
      transition: box-shadow 0.24s, min-height 0.25s, padding 0.22s, opacity 0.25s;
      overflow: visible;
      z-index: 12;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      opacity: 1;
    }
    .schedule-panel.expanded {
      min-height: 310px;
      opacity: 0.92;
      box-shadow: 0 16px 70px #1939a53a;
      pointer-events: all;
    }
    /* Отступы, размер шрифта расписания */
    .main-schedule {
      font-size: 1.24em;
      margin: 0 0 5px 0;
      list-style: none;
      padding-left: 0.6em;
      padding-bottom: 0;
      width: 90vw;
      max-width: 950px;
    }
    .main-schedule li {
      margin-bottom: 3px;
      font-weight: 400;
      line-height: 1.45;
      text-align: left;
      color: #fff;
      font-size: 1.16em;
    }
    /* Сильное выделение только числа, дня и времени */
    .main-schedule strong {
      font-weight: 700;
      font-size: 1.17em;
      letter-spacing: 0.01em;
      color: #fff;
    }
    /* Стрелка-спойлер */
    .panel-arrow {
      margin: 12px auto 0 auto;
      width: 34px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.88;
      transition: transform 0.24s;
    }
    .panel-arrow svg {
      width: 32px;
      height: 22px;
      fill: #fff;
      transition: transform 0.22s;
    }
    .schedule-panel.expanded .panel-arrow svg {
      transform: rotate(180deg);
    }
    /* Скрытое расписание */
    .hidden-schedule {
      display: none;
      margin-top: 6px;
      font-size: 1.09em;
      list-style: none;
      padding-left: 0.5em;
      color: #fff;
      width: 88vw;
      max-width: 930px;
      background: none;
    }
    .schedule-panel.expanded .hidden-schedule {
      display: block;
      animation: fadeInDown 0.24s;
    }
    @keyframes fadeInDown {
      from {opacity: 0; transform: translateY(-16px);}
      to {opacity: 1; transform: none;}
    }
    /* Полупрозрачная маска */
    .schedule-panel-mask {
      display: none;
      position: fixed;
      z-index: 11;
      left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(244,239,229,0.06);
    }
    .schedule-panel.expanded ~ .schedule-panel-mask {
      display: block;
    }
    /* Блоки-карточки */
    .blocks-row {
      display: flex;
      flex-wrap: wrap;
      gap: 2em;
      justify-content: center;
      margin: 48px auto 0 auto;
      z-index: 1;
      position: relative;
      max-width: 1200px;
    }
    .card-block {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 24px #1939a51a;
      width: 260px;
      min-height: 240px;
      cursor: pointer;
      transition: transform 0.18s, box-shadow 0.23s;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .card-block:hover {
      transform: scale(1.03);
      box-shadow: 0 10px 38px #1939a53a;
    }
    .card-block img {
      width: 100%;
      height: 144px;
      object-fit: cover;
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
    }
    .card-title {
      font-family: 'Forum', serif;
      font-size: 1.18em;
      color: var(--bogoroditsa-blue);
      margin: 0.8em 0 0.5em 0;
      font-weight: 700;
    }
    .card-desc {
      font-size: 1em;
      color: #474747;
      margin-bottom: 1em;
      padding: 0 1em;
      text-align: center;
    }
    /* Футер */
    .footer {
      margin-top: 44px;
      font-size: 1.01em;
      color: #555;
      text-align: center;
      padding-bottom: 34px;
    }
    .footer a {
      color: var(--bogoroditsa-blue);
      text-decoration: underline;
      transition: color 0.2s;
    }
    /* Адаптив */
    @media (max-width: 900px) {
      .logo-text { font-size: 2em; min-width: 120px;}
      .logo-block img { height: 70px; margin: 0 9px; }
      .blocks-row { flex-direction: column; gap: 1.2em; }
      .card-block { width: 96vw; min-width: 0;}
      .main-schedule, .hidden-schedule { font-size: 1.04em; }
    }
    @media (max-width: 540px) {
      .logo-block { flex-direction: column; gap: 3px; }
      .logo-block img { margin: 10px 0; }
      .logo-text { font-size: 1.1em; min-width: 0;}
      .main-schedule, .hidden-schedule { font-size: 0.97em; }
      .schedule-panel { padding: 18px 3vw 13px 7vw;}
    }
  </style>
</head>
<body>
  <div class="overlay">

    <div class="lang-switch" role="group" aria-label="Переключение языков">
      <span class="active" data-lang="ru">RU</span>
      <span data-lang="fr">FR</span>
      <span data-lang="by">BY</span>
      <span data-lang="ua">UA</span>
    </div>

    <header>
      <div class="logo-block">
        <div class="logo-text logo-left" id="logo-left">
          <span>Храм</span>
          <span>Знамения</span>
        </div>
        <img src="assets/icon.gif" alt="Икона Богородицы" />
        <div class="logo-text logo-right" id="logo-right">
          <span>Пресвятой</span>
          <span>Богородицы</span>
        </div>
      </div>
      <div class="subheading" id="subheading">
        Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат
      </div>
    </header>

    <!-- Плашка расписания -->
    <div class="schedule-panel-wrap">
      <div class="schedule-panel" id="schedulePanel">
        <ul class="main-schedule" id="mainSchedule"></ul>
        <div class="panel-arrow" id="panelArrow" style="display:flex;">
          <svg viewBox="0 0 38 24">
            <path d="M6 8l13 9 13-9" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
          </svg>
        </div>
        <ul class="hidden-schedule" id="hiddenSchedule"></ul>
      </div>
      <div class="schedule-panel-mask"></div>
    </div>

    <!-- Карточки -->
    <div class="blocks-row" id="main-blocks">
      <div class="card-block" data-block="history">
        <img src="assets/church_outside.jpg" alt="Вид храма" />
        <div class="card-title">История прихода</div>
        <div class="card-desc">Как всё начиналось. Кратко о главном.</div>
      </div>
      <div class="card-block" data-block="icon">
        <img src="assets/icon_inside.jpg" alt="Икона Знамения" />
        <div class="card-title">Икона Знамения</div>
        <div class="card-desc">Главная святыня храма — история и чудеса.</div>
      </div>
      <div class="card-block" data-block="schedule">
        <img src="assets/service.jpg" alt="Богослужение" />
        <div class="card-title">Богослужения</div>
        <div class="card-desc">Как устроено расписание, ответы на вопросы.</div>
      </div>
      <div class="card-block" data-block="community">
        <img src="assets/community.jpg" alt="Община" />
        <div class="card-title">Приходская жизнь</div>
        <div class="card-desc">О нашей общине, жизни вне богослужений.</div>
      </div>
    </div>

    <div class="footer" id="footer">
      87, boulevard Exelmans, Paris 75016<br />
      Метро: Exelmans (ligne 9)<br />
      ✉️ <a id="email" href="mailto:ndsigne@gmail.com">ndsigne@gmail.com</a>
    </div>
  </div>

  <script>
    // ---- Все языки ----
    const translations = {
      ru: {
        logoLeft: ["Храм", "Знамения"],
        logoRight: ["Пресвятой", "Богородицы"],
        subheading: "Викариат имени Святых Марии Парижской и Алексия Южинского — Вселенский Патриархат",
        mainSchedule: [
          "<strong>16 суббота, 18:00</strong> – Всенощная (Неделя 10-я по Пятидесятнице) Глас 1-й",
          "<strong>17 воскресенье, 10:30</strong> – Литургия (Свв. семи отроков, иже во Ефесе)"
        ],
        fullSchedule: [
          "<strong>16 суббота, 18:00</strong> – Всенощная (Неделя 10-я по Пятидесятнице) Глас 1-й",
          "<strong>17 воскресенье, 10:30</strong> – Литургия (Свв. семи отроков, иже во Ефесе)",
          "<strong>18 понедельник, 18:00</strong> – Всенощная (Преображение Господне)",
          "<strong>19 вторник, 10:00</strong> – Литургия/Освящение воды и фруктов (Преображение Господне – Второй Спас)",
          "<strong>27 среда, 18:00</strong> – Всенощная (Успение Пресвятой Богородицы)",
          "<strong>28 четверг, 10:00</strong> – Литургия (Успение Пресвятой Богородицы)"
        ]
      },
      fr: {
        logoLeft: ["Église", "Orthodoxe"],
        logoRight: ["Notre-Dame", "du Signe"],
        subheading: "Vicariat Sainte-Marie-de-Paris et Saint-Alexis-d’Ugine – Patriarcat Œcuménique",
        mainSchedule: [
          "<strong>16 samedi, 18:00</strong> – Vigiles (10<sup>ème</sup>&nbsp;Dimanche après la&nbsp;Pentecôte) 1<sup>er</sup>&nbsp;ton",
          "<strong>17 dimanche, 10:30</strong> – Liturgie (Sept dormants d’Ephèse)"
        ],
        fullSchedule: [
          "<strong>16 samedi, 18:00</strong> – Vigiles (10<sup>ème</sup>&nbsp;Dimanche après la&nbsp;Pentecôte) 1<sup>er</sup>&nbsp;ton",
          "<strong>17 dimanche, 10:30</strong> – Liturgie (Sept dormants d’Ephèse)",
          "<strong>18 lundi, 18:00</strong> – Vigiles (Transfiguration de&nbsp;N.S.&nbsp;Jésus-Christ)",
          "<strong>19 mardi, 10:00</strong> – Liturgie de&nbsp;la&nbsp;Transfiguration (Bénédiction de&nbsp;l’eau et&nbsp;des fruits)",
          "<strong>27 mercredi, 18:00</strong> – Vigiles (Dormition de&nbsp;la&nbsp;Très Sainte Mère de&nbsp;Dieu)",
          "<strong>28 jeudi, 10:00</strong> – Liturgie (Dormition de&nbsp;la&nbsp;Très Sainte Mère de&nbsp;Dieu)"
        ]
      },
      by: {
        logoLeft: ["Храм", "Знамення"],
        logoRight: ["Прасвятой", "Багародзіцы"],
        subheading: "Вікарыят імені Святых Марыі Парыжскай і Аляксея Южынскага — Сусветны Патрыярхат",
        mainSchedule: [
          "<strong>16 субота, 18:00</strong> – Усяночная (Тыдзень 10-ы пасля Пяцідзясятніцы) Тон 1-шы",
          "<strong>17 нядзеля, 10:30</strong> – Літургія (Святыя сем юнакоў, што былі ў Эфесе)"
        ],
        fullSchedule: [
          "<strong>16 субота, 18:00</strong> – Усяночная (Тыдзень 10-ы пасля Пяцідзясятніцы) Тон 1-шы",
          "<strong>17 нядзеля, 10:30</strong> – Літургія (Святыя сем юнакоў, што былі ў Эфесе)",
          "<strong>18 панядзелак, 18:00</strong> – Усяночная (Пераяўленне Гасподняе)",
          "<strong>19 аўторак, 10:00</strong> – Літургія, асвячэнне вады і пладоў (Пераяўленне Гасподняе – Другі Спас)",
          "<strong>27 серада, 18:00</strong> – Усяночная (Успенне Прасвятой Багародзіцы)",
          "<strong>28 чацвер, 10:00</strong> – Літургія (Успенне Прасвятой Багародзіцы)"
        ]
      },
      ua: {
        logoLeft: ["Храм", "Знамення"],
        logoRight: ["Пресвятої", "Богородиці"],
        subheading: "Вікаріат імені Святих Марії Паризької та Олексія Южинського — Вселенський Патріархат",
        mainSchedule: [
          "<strong>16 субота, 18:00</strong> – Всеношна (Неділя 10-та після П’ятидесятниці) Глас 1-й",
          "<strong>17 неділя, 10:30</strong> – Літургія (Сім отроків, що у Ефесі)"
        ],
        fullSchedule: [
          "<strong>16 субота, 18:00</strong> – Всеношна (Неділя 10-та після П’ятидесятниці) Глас 1-й",
          "<strong>17 неділя, 10:30</strong> – Літургія (Сім отроків, що у Ефесі)",
          "<strong>18 понеділок, 18:00</strong> – Всеношна (Преображення Господнє)",
          "<strong>19 вівторок, 10:00</strong> – Літургія, освячення води та плодів (Преображення Господнє – Другий Спас)",
          "<strong>27 середа, 18:00</strong> – Всеношна (Успіння Пресвятої Богородиці)",
          "<strong>28 четвер, 10:00</strong> – Літургія (Успіння Пресвятої Богородиці)"
        ]
      }
    };

    // Смена языка
    const langSwitchers = document.querySelectorAll('.lang-switch span');
    let currentLang = 'ru';

    langSwitchers.forEach(s => {
      s.onclick = () => {
        langSwitchers.forEach(el => el.classList.remove('active'));
        s.classList.add('active');
        currentLang = s.dataset.lang;
        setHeaderLang();
        renderSchedulePanel();
      };
    });

    // Заголовки и шапка
    function setHeaderLang() {
      document.getElementById('logo-left').innerHTML = `<span>${translations[currentLang].logoLeft[0]}</span><span>${translations[currentLang].logoLeft[1]}</span>`;
      document.getElementById('logo-right').innerHTML = `<span>${translations[currentLang].logoRight[0]}</span><span>${translations[currentLang].logoRight[1]}</span>`;
      document.getElementById('subheading').innerText = translations[currentLang].subheading;
    }

    // Расписание — убирает прошедшие службы!
    function getUpcoming(list) {
      // Можно доработать для дат, сейчас просто возвращает все
      return list;
    }

    function renderSchedulePanel() {
      const schedulePanel = document.getElementById('schedulePanel');
      const mainSchedule = document.getElementById('mainSchedule');
      const hiddenSchedule = document.getElementById('hiddenSchedule');
      const arr = translations[currentLang].mainSchedule;
      const all = translations[currentLang].fullSchedule;

      // Отсекаем прошедшие службы (оставляет только ближайшие 2)
      const now = new Date();
      function isPast(text) {
        const m = text.match(/<strong>(\d+)[^,]+, (\d{1,2}):(\d{2})<\/strong>/);
        if (!m) return false;
        let day = parseInt(m[1]), hour = parseInt(m[2]), min = parseInt(m[3]);
        let month = now.getMonth(), year = now.getFullYear();
        let date = new Date(year, month, day, hour, min);
        return (now.getTime() - date.getTime()) > 90 * 60 * 1000; // 1.5 часа
      }
      let visible = all.filter(item => !isPast(item)).slice(0, 2);
      let hidden = all.filter(item => !isPast(item)).slice(2);

      mainSchedule.innerHTML = visible.map(x => `<li>${x}</li>`).join('');
      hiddenSchedule.innerHTML = hidden.length
        ? hidden.map(x => `<li>${x}</li>`).join('')
        : '<li style="opacity:.65;text-align:center;font-size:1.01em;">Больше богослужений пока не запланировано</li>';

      // Скрываем или показываем
      schedulePanel.classList.remove('expanded');
      hiddenSchedule.style.display = 'none';
      document.querySelector('.panel-arrow').style.display = hidden.length ? 'flex' : 'none';
    }

    // Открытие/закрытие расписания поверх карточек
    const schedulePanel = document.getElementById('schedulePanel');
    const hiddenSchedule = document.getElementById('hiddenSchedule');
    schedulePanel.onclick = function () {
      const isOpen = schedulePanel.classList.toggle('expanded');
      hiddenSchedule.style.display = isOpen ? 'block' : 'none';
    };

    // При старте
    setHeaderLang();
    renderSchedulePanel();

    // (Можно добавить модальные окна карточек по прежней логике)
  </script>
</body>
</html>
